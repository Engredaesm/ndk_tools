#!/bin/bash
#  abuild.sh
#  
#
#  Created by n-d-k on 10/6/19.
#  Sample of Clover Auto Daily Build Using Travis Ci
#
CLOVER_GIT_URL="https://github.com/CloverHackyColor/CloverBootloader.git"
GIT_DIR="Build"
mkdir $GIT_DIR
git clone $CLOVER_GIT_URL $GIT_DIR
R_TAG=$(git describe --tags $(git rev-list --tags --max-count=1))

#=================== Clover repo section ==================
cd $GIT_DIR
CLOVER_TAG=$(git describe --tags $(git rev-list --tags --max-count=1))

if [[ "$CLOVER_TAG" == "$R_TAG" ]]; then
    echo "Build is up to date!"
    exit 0
else
    echo "Need new build!"
    ./buildme XCODE8 travis
fi
